<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Feedback</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        body {
            background-color: skyblue;
        }
        h1 {
            margin-top: 20px;
            text-align: center;
            color: #333;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .video-container {
            margin-top: 30px;
            text-align: center;
        }
        .feedback-container {
            margin-top: 40px;
        }
        th, td {
            text-align: center;
        }
        .home-icon {
            position: absolute;
            top: 20px;
            left: 20px;
            color: #080808;
        }
        .home-icon img {
            width: 40px;
            height: 40px;
        }
    </style>
</head>
<body>

    <!-- Home icon that redirects to the landing page -->
    <a href="Landing Page.html" class="home-icon">
        <img src="https://img.icons8.com/ios-filled/50/000000/home.png" alt="Home">
    </a>

    <div class="container">
        <h1>Video Feedback</h1>

        <!-- Dropdown to select module -->
        <form>
            <div class="mb-3">
                <label for="moduleSelect" class="form-label">Select Module:</label>
                <select id="moduleSelect" class="form-select" onchange="updateAssignmentOptions()">
                    <option value="">-- Select Module --</option>
                    <option value="HMDC 121">HMDC 121</option>
                    <option value="HMSC 122">HMSC 122</option>
                    <option value="HMSC 221">HMSC 221</option>
                </select>
            </div>

            <!-- Dropdown to select assignment -->
            <div class="mb-3">
                <label for="assignmentSelect" class="form-label">Select Assignment:</label>
                <select id="assignmentSelect" class="form-select" onchange="loadSubmission()">
                    <option value="">-- Select Assignment --</option>
                    <!-- Assignment options will be dynamically populated -->
                </select>
            </div>
        </form>

        <!-- Video player section -->
        <div class="video-container" id="videoContainer">
            <!-- Placeholder: Select an assignment to display the video -->
            <p class="text-muted">Select an assignment to view the video.</p>
        </div>

        <!-- Form to provide feedback -->
        <div class="feedback-container">
            <form id="feedbackForm">
                <div class="form-group">
                    <label for="marks">Enter Marks:</label>
                    <input type="number" class="form-control" id="marks" placeholder="Enter marks out of 100" required>
                </div>

                <div class="form-group">
                    <label for="commentary">Commentary/Feedback:</label>
                    <textarea class="form-control" id="commentary" rows="4" placeholder="Provide your feedback or commentary" required></textarea>
                </div>

                <button type="submit" class="btn btn-success mt-3">Submit Feedback</button>
            </form>

            <!-- Message after feedback submission -->
            <div id="message" class="mt-3"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        // Mock data for demo purposes
        const assignmentsByModule = {
            'HMDC 121': ['Introduction to HMDC 121', 'Assignment 2 for HMDC 121'],
            'HMSC 122': ['Overview of HMSC 122 Concepts', 'Assignment 2 for HMSC 122'],
            'HMSC 221': ['Advanced Topics in HMSC 221', 'Assignment 2 for HMSC 221']
        };

        const submissions = {
            'Introduction to HMDC 121': {
                student: 'Alice Johnson',
                video: 'https://www.w3schools.com/html/mov_bbb.mp4', // Sample video link
                submissionDate: '2024-10-12'
            },
            'Overview of HMSC 122 Concepts': {
                student: 'Charlie Brown',
                video: 'https://www.w3schools.com/html/mov_bbb.mp4', // Sample video link
                submissionDate: '2024-10-14'
            },
            'Advanced Topics in HMSC 221': {
                student: 'Dave Wilson',
                video: 'https://www.w3schools.com/html/mov_bbb.mp4', // Sample video link
                submissionDate: '2024-10-15'
            }
        };

        // Update assignment dropdown based on selected module
        function updateAssignmentOptions() {
            const moduleSelect = document.getElementById("moduleSelect").value;
            const assignmentSelect = document.getElementById("assignmentSelect");

            assignmentSelect.innerHTML = '<option value="">-- Select Assignment --</option>';

            if (moduleSelect) {
                assignmentsByModule[moduleSelect].forEach(assignment => {
                    const option = document.createElement("option");
                    option.value = assignment;
                    option.text = assignment;
                    assignmentSelect.appendChild(option);
                });
            }
        }

        // Load the video submission based on selected assignment
        function loadSubmission() {
            const assignmentSelect = document.getElementById("assignmentSelect").value;
            const videoContainer = document.getElementById("videoContainer");

            // Clear the video container
            videoContainer.innerHTML = '';

            if (assignmentSelect && submissions[assignmentSelect]) {
                const submission = submissions[assignmentSelect];

                const videoElement = document.createElement("video");
                videoElement.setAttribute("controls", "controls");
                videoElement.style.width = "100%";
                videoElement.innerHTML = `
                    <source src="${submission.video}" type="video/mp4">
                    Your browser does not support the video tag.
                `;

                const downloadLink = document.createElement("a");
                downloadLink.href = submission.video;
                downloadLink.className = 'btn btn-primary mt-3';
                downloadLink.download = `${assignmentSelect}_submission.mp4`;
                downloadLink.innerHTML = 'Download Video';

                videoContainer.appendChild(videoElement);
                videoContainer.appendChild(downloadLink);
            } else {
                videoContainer.innerHTML = '<p class="text-muted">No video submission found.</p>';
            }
        }

        // Handle feedback form submission
        document.getElementById("feedbackForm").addEventListener("submit", function(event) {
            event.preventDefault();

            const marks = document.getElementById("marks").value;
            const commentary = document.getElementById("commentary").value;

            // Here, you would normally send this data to the backend or store it
            console.log(`Marks: ${marks}, Feedback: ${commentary}`);

            // Show success message
            document.getElementById("message").innerHTML = '<p class="text-success">Feedback submitted successfully!</p>';

            // Reset the form
            document.getElementById("feedbackForm").reset();
        });
    </script>
</body>
</html>
